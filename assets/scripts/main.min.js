const resultModal=document.querySelector(".result"),successIcon=document.getElementById("success"),failureIcon=document.getElementById("failure"),resultMessage=document.getElementById("result-message"),showResultModal=(a,b)=>{!0==a?(successIcon.style.display="block",failureIcon.style.display="none"):!1==a&&(successIcon.style.display="none",failureIcon.style.display="block"),resultMessage.textContent=b,resultModal.classList.add("show-result"),setTimeout(()=>{resultModal.classList.remove("show-result"),successIcon.style.display="none",failureIcon.style.display="none",resultMessage.textContent=""},3e3)},separateButton=document.querySelector(".scroll-to-top");document.addEventListener("scroll",()=>{const a=document.documentElement.scrollTop;1200<a?separateButton.style.opacity=1:(separateButton.style.display="flex",separateButton.style.opacity=0)}),separateButton.addEventListener("click",()=>{window.scrollTo(0,0)});const itemsContainer=document.querySelector(".modal__items"),singleItemContainer=document.querySelector(".single-product");function sendHttpRequest(a,b,c){return fetch(b,{method:a,body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then(a=>200<=a.status&&300>a.status?a.json():a.json().then(a=>{throw showResultModal(!1,a),new Error("Server-side problem!")})).catch(a=>{throw showResultModal(!1,a),new Error("Something went wrong!")})}async function getProduct(a){try{const b=await sendHttpRequest("GET",`http://localhost/api/product/read.php?tn=${a}`);itemsContainer.innerHTML="";for(const a of b){const b=a.id,c=a["product-title"],d=a["product-price"],e=a["product-size"],f=a["product-description"],g=a["product-image-one"],h=a["product-image-two"],i=a["product-image-three"],j=a["product-image-four"],k=document.createElement("div");k.classList.add("modal__item"),k.style.backgroundImage=g;const l=document.createElement("div");l.classList.add("item__icons"),k.appendChild(l);const m=document.createElement("div");m.setAttribute("id","item-preview"),l.appendChild(m);const n=document.createElement("i");n.classList.add("fas","fa-search"),m.appendChild(n);const o=document.createElement("div");o.setAttribute("id","item-favorite"),l.appendChild(o);const p=document.createElement("i");p.classList.add("far","fa-heart"),o.appendChild(p);const q=document.createElement("div");q.setAttribute("id","item-card"),l.appendChild(q);const r=document.createElement("i");r.classList.add("fas","fa-shopping-cart"),q.appendChild(r),itemsContainer.appendChild(k),k.addEventListener("mouseenter",a=>{a.target.style.backgroundImage=i}),k.addEventListener("mouseout",a=>{a.target.style.backgroundImage=g}),k.addEventListener("click",()=>{singleItemContainer.classList.add("single-product--open");const a=document.querySelector(".product__images--main"),b=document.querySelector(".thumbnail-image__one"),k=document.querySelector(".thumbnail-image__two"),l=document.querySelector(".thumbnail-image__three"),m=document.querySelector(".thumbnail-image__four"),n=document.querySelector(".product__info h2"),o=document.querySelector(".product__info h3"),p=document.querySelector(".product__info h4"),q=document.querySelector(".product__info p");a.style.backgroundImage=g,b.style.backgroundImage=g,k.style.backgroundImage=h,l.style.backgroundImage=i,m.style.backgroundImage=j,n.textContent=c,o.textContent=d,p.textContent=e,q.textContent=f;const r=document.querySelector(".product__images--thumbnail");r.addEventListener("click",b=>{if("product__images--thumbnail"!=b.target.className){const c=b.target.style.backgroundImage;a.style.backgroundImage=c}})})}}catch(a){showResultModal(!1,a.message)}}const modalContainer=document.querySelector(".modal"),closeModalIcon=document.getElementById("close-modal-icon"),openModalHandler=()=>{modalContainer.style.display="block",setTimeout(()=>{modalContainer.style.opacity=1},500);const a=document.getElementById("header-navigation");a.classList.contains("sideNav-open")&&a.classList.remove("sideNav-open")},closeModalHandler=()=>{modalContainer.style.opacity=0,setTimeout(()=>{itemsContainer.innerHTML="",modalContainer.style.display="none"},600)};closeModalIcon.addEventListener("click",closeModalHandler);const previewProduct=a=>{const b=document.getElementById("modal-current-category");b.textContent=a.charAt(0).toUpperCase()+a.slice(1),getProduct(a)};document.querySelector(".products__list").addEventListener("click",a=>{if("A"==a.target.tagName){let b=a.target.textContent.toLowerCase();b=b.replace(" ",""),openModalHandler(),previewProduct(b)}}),document.querySelector(".modal__categories").addEventListener("click",a=>{if("P"==a.target.tagName){let b=a.target.textContent.toLowerCase();b=b.replace(" ",""),previewProduct(b)}});const SingleProductCloseIcon=document.querySelector(".single-product__close-button");SingleProductCloseIcon.addEventListener("click",()=>{singleItemContainer.classList.remove("single-product--open")});const hamburgerIcon=document.querySelector(".menu-icon"),sideNavCloseIcon=document.querySelector(".navigation__close-button"),productList=document.getElementById("products-list"),productItems=document.getElementById("products-items"),toggleSideNavClass=()=>{const a=document.getElementById("header-navigation");a.classList.toggle("sideNav-open")};hamburgerIcon.addEventListener("click",toggleSideNavClass),sideNavCloseIcon.addEventListener("click",()=>{toggleSideNavClass(),productItems.classList.remove("products-open")}),productList.addEventListener("click",()=>{productItems.classList.toggle("products-open")});const homeButton=document.querySelector(".fa-home");homeButton.addEventListener("click",()=>{window.scrollTo(0,0)});const copyrightElement=document.getElementById("copyright"),currentYear=new Date().getFullYear().toString();copyrightElement.textContent=currentYear;let indexId=1;const changeSlideshow=setInterval(()=>{const a=[{url:"url('assets/images/01-slideshow.jpg')",text:"Chair"},{url:"url('assets/images/02-slideshow.jpg')",text:"Spring"},{url:"url('assets/images/03-slideshow.jpg')",text:"New"}],b=document.getElementById("slideshow-text"),c=document.getElementById("slideshow-container");3==indexId&&(indexId=0),c.style.backgroundImage=a[indexId].url,b.textContent=a[indexId].text,indexId++},5e3),openUserModal=()=>{if(null!=sessionStorage.getItem("user")){const a=JSON.parse(sessionStorage.getItem("user"));if(a.status)return void showResultModal(!1,"you are already signed in")}const a=document.querySelector(".user");a.classList.toggle("user-show"),UserSignupModal.style.display="none",showUserLoginModal()},toggleUserModal=()=>{const a=document.querySelector(".user");a.classList.toggle("user-show"),UserSignupModal.style.display="none",showUserLoginModal()},closeUserModalIcon=document.getElementById("close-user");closeUserModalIcon.addEventListener("click",toggleUserModal);const topUserModalIcon=document.getElementById("user-top-icon"),bottomUserModalIcon=document.getElementById("user-bottom-icon"),UserLoginModal=document.querySelector(".user__modal--login"),showUserLoginModal=()=>{UserLoginModal.style.display="flex"};topUserModalIcon.addEventListener("click",openUserModal),bottomUserModalIcon.addEventListener("click",openUserModal);const showUserSignupButton=document.querySelector(".login__button--register"),UserSignupModal=document.querySelector(".user__modal--signup");showUserSignupButton.addEventListener("click",()=>{UserLoginModal.style.display="none",UserSignupModal.style.display="flex"});const loginForm=document.getElementById("login-form"),loginUserName=document.getElementById("login__username"),loginPassword=document.getElementById("login__password");let loginError=!1;const validateLoginUsername=()=>{const a=loginUserName.value.trim();""==a?(loginUserName.style.borderColor="red",document.getElementById("login-username-error").textContent="username field is empty!",loginError=!0):null==a.match(/^[a-zA-Z0-9]+$/)?(loginUserName.style.borderColor="red",document.getElementById("login-username-error").textContent="username is not valid!",loginError=!0):(loginUserName.style.borderColor="green",document.getElementById("login-username-error").textContent="")},validateLoginPassword=()=>{const a=loginPassword.value.trim();""==a?(loginPassword.style.borderColor="red",document.getElementById("login-password-error").textContent="password field is empty!",loginError=!0):(loginPassword.style.borderColor="green",document.getElementById("login-password-error").textContent="")};loginForm.addEventListener("submit",a=>{if(a.preventDefault(),validateLoginUsername(),validateLoginPassword(),!loginError){const a={username:loginUserName.value.trim(),password:loginPassword.value.trim()};try{sendUserInfo("POST","http://localhost/api/user/login.php",a).then(a=>{if("success"==a.status){toggleUserModal(),showResultModal(!0,"user logged in successfully");const b={userName:a.username,status:!0};sessionStorage.setItem("user",JSON.stringify(b))}else showResultModal(!1,a.status)}).catch(a=>{showResultModal(!1,a)})}catch(a){showResultModal(!1,a.message)}}});const sendUserInfo=(a,b,c)=>fetch(b,{method:a,body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then(a=>200<=a.status&&300>a.status?a.json():a.json().then(a=>{throw showResultModal(!1,a),new Error("Server-side problem!")})).catch(a=>{throw console.log("im here"),showResultModal(!1,a),new Error("Something went wrong!")}),signupForm=document.getElementById("signup-form"),firstName=document.getElementById("signup__firstname"),lastName=document.getElementById("signup__lastname"),email=document.getElementById("signup__email"),signupUserName=document.getElementById("signup__username"),signupPassword=document.getElementById("signup__password");let signupError=!1;const validateFirstName=()=>{const a=firstName.value.trim();""==a?(firstName.style.borderColor="red",document.getElementById("firstname-error").textContent="first name field is empty!",signupError=!0):null==a.match(/^[a-zA-Z ]+$/)?(firstName.style.borderColor="red",document.getElementById("firstname-error").textContent="first name is not valid!",signupError=!0):(firstName.style.borderColor="green",document.getElementById("firstname-error").textContent="")},validateLastName=()=>{const a=lastName.value.trim();""==a?(lastName.style.borderColor="red",document.getElementById("lastname-error").textContent="last name field is empty!",signupError=!0):null==a.match(/^[a-zA-Z ]+$/)?(lastName.style.borderColor="red",document.getElementById("lastname-error").textContent="last name is not valid!",signupError=!0):(lastName.style.borderColor="green",document.getElementById("lastname-error").textContent="")},validateEmail=()=>{const a=email.value.trim();""==a?(email.style.borderColor="red",document.getElementById("email-error").textContent="email field is empty!",signupError=!0):null==a.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)?(email.style.borderColor="red",document.getElementById("email-error").textContent="email is not valid!",signupError=!0):(email.style.borderColor="green",document.getElementById("email-error").textContent="")},validateRegisterUsername=()=>{const a=signupUserName.value.trim();""==a?(signupUserName.style.borderColor="red",document.getElementById("signup-username-error").textContent="username field is empty!",signupError=!0):null==a.match(/^[a-zA-Z0-9]+$/)?(signupUserName.style.borderColor="red",document.getElementById("signup-username-error").textContent="username is not valid!",signupError=!0):(signupUserName.style.borderColor="green",document.getElementById("signup-username-error").textContent="")},validateRegisterPassword=()=>{const a=signupPassword.value.trim();""==a?(signupPassword.style.borderColor="red",document.getElementById("signup-password-error").textContent="password field is empty!",signupError=!0):(signupPassword.style.borderColor="green",document.getElementById("signup-password-error").textContent="")};signupForm.addEventListener("submit",a=>{if(a.preventDefault(),validateFirstName(),validateLastName(),validateEmail(),validateRegisterUsername(),validateRegisterPassword(),!signupError){const a={firstname:firstName.value.trim(),lastname:lastName.value.trim(),email:email.value.trim(),username:signupUserName.value.trim(),password:signupPassword.value.trim()};try{sendUserInfo("POST","http://localhost/api/user/register.php",a).then(a=>{"success"==a.status?(toggleUserModal(),showResultModal(!0,"user is registered successfully")):showResultModal(!1,a.status)}).catch(a=>{showResultModal(!1,a)})}catch(a){showResultModal(!1,a.message)}}});